pipeline {
    agent any

    parameters {
        string(name: 'VEHICLE_TYPE', defaultValue: 'car', description: 'Type of vehicle (car, bike, motorcycle)')
        string(name: 'ARRIVING', defaultValue: '', description: 'Arriving time in format YYYY-MM-DDTHH:MM')
        string(name: 'LEAVING', defaultValue: '', description: 'Leaving time in format YYYY-MM-DDTHH:MM')
        string(name: 'CUISINE_TYPE', defaultValue: '', description: 'Type of cuisine for restaurant (French, Italian, Japanese, Mexican, Indian)')
    }

    stages {
        stage('Clone repository') {
            steps {
                git 'https://github.com/username/your_project.git'
            }
        }

        stage('Install dependencies') {
            steps {
                sh 'python3 -m venv venv'
                sh './venv/bin/pip install -r requirements.txt'
            }
        }

        stage('Run tests') {
            steps {
                // Ajoutez ici vos tests, par exemple :
                // sh './venv/bin/python -m unittest discover tests'
                echo 'No tests specified'
            }
        }

        stage('Deploy application') {
            steps {
                sh """
                ./venv/bin/python app.py --vehicle_type ${params.VEHICLE_TYPE} \
                                         --arriving ${params.ARRIVING} \
                                         --leaving ${params.LEAVING} \
                                         --cuisine_type ${params.CUISINE_TYPE} &
                """
            }
        }
   
